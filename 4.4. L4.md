### 4.4. L4-сеть [Кулагин Игорь]
**Задание 1.**
>Узел ```А``` отправил узлу ```В``` ```SYN```-запрос.
>Какова длина сегмента?

Вопрос не до конца понятен.
Если вопрос по MSS, то он по умолчанию будет установлен в 536 байт.
Если вопрос про размер полезной нагрузки самого ```SYN```-запроса, то он будет нулевым, так как на этом этапе payload еще отсутствует и достаточно информации из заголовков TCP. Если учитывать размер заголовков TCP, то размер сегмента составит 20 байт.

Было бы любопытно узнать какой ответ предполагается правильным.

**Задание 2.**
>Узел ```А``` инициировал соединение с узлом ```В```.
>Через некоторое время узел ```А``` получил ```SYN```, ```ACK```.
>В каком ```TCP``` состоянии будет узел ```А``` после получения такого ответа?

```ESTABLISHED```

**Задание 3.**
>1. Может ли во флагах TCP одновременно быть установлены флаги SYN и FIN при штатном режиме работы сети?
>2. Почему да или нет?

Нет, [эти флаги взаимоисключающие](https://www.juniper.net/documentation/us/en/software/junos/transport-ip/topics/topic-map/tcp-configure-features.html#:~:text=Both%20the%20SYN%20and%20FIN%20control%20flags%20are%20not%20normally,to%20finish%20a%20TCP%20connection).


**Задание 4.**
>```ss -ula sport = :53``` на хосте имеет следующий вывод:
```bash
State           Recv-Q          Send-Q                   Local Address:Port                     Peer Address:Port          Process
UNCONN          0               0                        127.0.0.53%lo:domain                        0.0.0.0:*
```
>1. Почему в `State` присутствует только `UNCONN`?

Согласно ключам команды ```SS``` в выводе отображены "слушающие" ```UPD```-сокеты. В данном случае на ```53``` порту слушает DNS-сервер. ```UNCONN``` говорит о том, что к DNS-серверу нет активных обращений.  

>2. Может ли там присутствовать `TIME-WAIT`?

Нет, такой статус может относиться только к проколу ```TCP```, а мы возвращаем ```UDP```-сокеты.


**Задание 5.**
>1. Может ли сложиться ситуация, при которой большое число соединений ```TCP``` на хосте находятся в состоянии `TIME-WAIT`  ?

Вполне. ```TIME-WAIT``` нормальная часть процесса завершения ```TCP```-соединения. Если у сервера много клиентов всегда какой-то процент из них будет находится в ```TIME-WAIT```. 

>2. Если да, то является ли она хорошей или плохой?

В крайних могут быть [исчерпаны доступные для создания новых подключений порты](https://docs.appdynamics.com/appd/21.x/21.5/en/infrastructure-visibility/network-visibility/workflows-and-example-use-cases/tcp-port-exhaustion-example-use-case#:~:text=A%20TCP%20socket%20is%20a,for%20use%20by%20another%20application.).