### Задание 1
>Какие преимущества даёт подход IAC?

- Нет необходимости в ручной настройке.
- Скорость: настройка ("поднятие") инфраструктуры занимает на порядок меньше времени.
- Воспроизводимость: поднимаемая инфраструктура всегда идентична.
- Масштабируемость: один инженер может с помощью одного и того же кода настраивать и управлять огромным количеством машин.

### Задание 2

* Устанавливаем Ansible на Ubuntu:
```
sudo apt-add-repository -y ppa:ansible/ansible && \
sudo apt update && \
sudo apt install -y ansible
```

- Создаем каталог `~/ansible/` и инвентарный файл `hosts` в нем:

`mkdir ~/ansible && touch ~/ansible/hosts`

- Генерим дефолтный конфиг для Ansible:
```
sudo mv /etc/ansible/ansible.cfg /etc/ansible/ansible.cfg.bak && \
ansible-config init --disabled all > ~/ansible.cfg && \
sudo mv ~/ansible.cfg /etc/ansible/ansible.cfg
```

- Меняем конфиг Ansible под себя: меняем формат вывода логов ansible на yml и прописываем путь к hosts (чтобы -i не указывать каждый раз):
```
sudo sed -i 's+;stdout_callback=default+stdout_callback=yml+g' /etc/ansible/ansible.cfg && \
sudo sed -i 's+;inventory=/etc/ansible/hosts+inventory=~/ansible/hosts+g' /etc/ansible/ansible.cfg
```
Опционально (это кажется не нужно, и так дефолтна опция):
```
sudo sed -i 's+;home=~/.ansible+home=~/.ansible+g' /etc/ansible/ansible.cfg
```

* Модифицируем файл `~/ansible/hosts`

> **Note**
> Нужно заменить IP адреса, имя пользователя и ssh-ключи на те, которые будут у хостов, на которых нужно запустить ansible.

> **Note**
> Команда для генерации ключей ssh: `ssh-keygen -t ed25519`

```
all:
  webservers:
    51.250.91.39:
      ansible_ssh_user: ubuntu
      ansible_ssh_private_key_file: ~/.ssh/id_ed25519
    84.201.132.79:
      ansible_ssh_user: ubuntu
      ansible_ssh_private_key_file: ~/.ssh/id_ed25519
```

> **Note**
> Убеждаемся, что на целевых серверах публичные ключи для id_ed25519 лежат в /home/ubuntu/.ssh/

* AD-hoc команды для ДР:

`ansible webservers -m ping`

### Задание 4 

`ansible webservers -b -m ansible.builtin.apt -a "name=mc state=present"`

`ansible webservers -m command -a "systemctl status cron"` (ssh, ufw, kmod)

`ansible webservers -m shell -a 'echo "I like Linux" > /tmp/netology.txt'`

`ansible webservers -m command -a 'cat /tmp/netology.txt'`

### Задание 3
> **Note**
> Вариант 1

В Ansible параметр "forks" отвечает за количество параллельных процессов, которые Ansible будет использовать при выполнении задач на удаленных хостах. Когда Ansible выполняет задачу на нескольких хостах одновременно, эта опция позволяет задать количество хостов, которые могут быть обработаны одновременно. Например, если значение "forks" равно 5, то Ansible будет выполнять задачи на 5 хостах одновременно. Значение по умолчанию для "forks" - это 5.

С другой стороны, параметр "serial" задает количество хостов, на которых Ansible будет выполнять задачи последовательно. Если значение "serial" равно 1, то Ansible будет выполнять задачи на каждом хосте последовательно, передвигаясь от одного хоста к другому, пока все задачи не будут выполнены на всех хостах. Если значение "serial" больше 1, то Ansible будет выполнять задачи на заданном количестве хостов одновременно, передвигаясь далее к следующей группе хостов.

Таким образом, основное отличие между параметрами "forks" и "serial" заключается в том, что "forks" управляет количеством параллельных процессов на каждом хосте, тогда как "serial" управляет количеством хостов, на которых выполняются задачи последовательно.

> **Note**
> Вариант 2

Параметр "forks" в Ansible определяет количество параллельных процессов, которые Ansible может использовать для выполнения задач на удаленных хостах. Значение "forks" определяет, сколько хостов может быть обработано одновременно. Это позволяет Ansible выполнять задачи быстрее.

Параметр "serial" в Ansible, с другой стороны, управляет тем, как много хостов могут быть обработаны одновременно. Значение "serial" задает количество хостов, на которых Ansible будет выполнять задачи последовательно. Например, если значение "serial" равно 1, то Ansible будет выполнять задачи на каждом хосте последовательно.

Итак, разница между параметрами "forks" и "serial" заключается в том, что "forks" управляет количеством параллельных процессов на каждом хосте, тогда как "serial" управляет количеством хостов, на которых выполняются задачи последовательно.